---
import Layout from "@layouts/Layout.astro";
import { allPlaylists, songs, type Song } from "@lib/data";

const { id } = Astro.params;

const {
  id: id_album,
  cover,
  title,
  artists,
} = allPlaylists.find((item) => item.albumId === parseInt(id));

const songs_album = songs.filter((item) => item.albumId === parseInt(id));
---

<Layout title="album">
  <section class="px-4 w-full pb-4">
    <div class="flex flex-row gap-4 items-end text-white">
      <picture class="aspect-square w-1/3 max-w-[200px] overflow-hidden">
        <img
          class="object-cover"
          src={cover}
          alt={title}
          transition:name="image_cover"
        />
      </picture>

      <div>
        <h4 class="text-xl">Playlist</h4>
        <h3 class="text-4xl mb-4">{title}</h3>
        <small class="text-base">{artists.join(", ")}</small>
        <p class="text-base">{songs.length} canciones, 3 h aproximadamente</p>
      </div>
    </div>

    <div class="mt-10 w-full">
      <table class="table-auto w-full">
        <thead class="text-left">
          <tr>
            <th>#</th>
            <th>Titulo</th>
            <th>Album</th>
            <th>*</th>
          </tr>
          <tr>
            <th></th>
          </tr>
          <tr class="border-b">
            <th></th>
          </tr>
        </thead>
        <tbody>
          {
            songs_album.map(({ id, title, album, duration }: Song) => (
              <tr>
                <td>{id}</td>
                <td>{title}</td>
                <td>{album}</td>
                <td>{duration}</td>
              </tr>
            ))
          }
        </tbody>
      </table>
    </div>
  </section>
</Layout>
